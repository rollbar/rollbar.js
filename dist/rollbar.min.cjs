/*! For license information please see rollbar.min.cjs.LICENSE.txt */
(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{default:()=>mr});const r=require("util"),n=require("os");var o=Object.prototype.hasOwnProperty,i=Object.prototype.toString,a=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e,r=o.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&o.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!n)return!1;for(e in t);return void 0===e||o.call(t,e)};const s=function t(){var e,r,n,o,i,s={},u=null,c=arguments.length;for(e=0;e<c;e++)if(null!=(u=arguments[e]))for(i in u)r=s[i],s!==(n=u[i])&&(n&&a(n)?(o=r&&a(r)?r:{},s[i]=t(o,n)):void 0!==n&&(s[i]=n));return s};function u(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return c(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function f(t,e){return e===p(t)}function p(t){var e=l(t);return"object"!==e?e:t?t instanceof Error?"error":{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase():"null"}function h(t){return f(t,"function")}function d(t){var e=l(t);return null!=t&&("object"==e||"function"==e)}var m={debug:0,info:1,warning:2,error:3,critical:4};function y(t,e){var r,n;try{r=JSON.stringify(t)}catch(o){if(e&&h(e))try{r=e(t)}catch(t){n=t}else n=o}return{error:n,value:r}}function v(t,e){return function(r,n){try{e(r,n)}catch(e){t.error(e)}}}function g(t){return function t(e,r){var n,o,i,a={};try{for(o in e)(n=e[o])&&(f(n,"object")||f(n,"array"))?r.includes(n)?a[o]="Removed circular reference: "+p(n):((i=r.slice()).push(n),a[o]=t(n,i)):a[o]=n}catch(t){a="Failed cloning custom data: "+t.message}return a}(t,[t])}function b(t,e,r,n,o){for(var i,a,s,u,c,l,f=[],h=[],d=0,m=t.length;d<m;++d){var y=p(l=t[d]);switch(h.push(y),y){case"undefined":break;case"string":i?f.push(l):i=l;break;case"function":u=v(e,l);break;case"date":f.push(l);break;case"error":case"domexception":case"exception":a?f.push(l):a=l;break;case"object":case"array":if(l instanceof Error||"undefined"!=typeof DOMException&&l instanceof DOMException){a?f.push(l):a=l;break}if(n&&"object"===y&&!c){for(var b=0,w=n.length;b<w;++b)if(void 0!==l[n[b]]){c=l;break}if(c)break}s?f.push(l):s=l;break;default:if(l instanceof Error||"undefined"!=typeof DOMException&&l instanceof DOMException){a?f.push(l):a=l;break}f.push(l)}}s&&(s=g(s)),f.length>0&&(s||(s=g({})),s.extraArgs=g(f));var k,x={message:i,err:a,custom:s,timestamp:S(),callback:u,notifier:r,diagnostic:{},uuid:(k=S(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=(k+16*Math.random())%16|0;return k=Math.floor(k/16),("x"===t?e:7&e|8).toString(16)})))};return x.data=x.data||{},function(t,e){e&&void 0!==e.level&&(t.level=e.level,delete e.level);e&&void 0!==e.skipFrames&&(t.skipFrames=e.skipFrames,delete e.skipFrames)}(x,s),n&&c&&(x.request=c),o&&(x.lambdaContext=o),x._originalArgs=t,x.diagnostic.original_arg_types=h,x}var w=["log","network","dom","navigation","error","manual"],k=["critical","error","warning","info","debug"];function x(t,e){for(var r=0;r<t.length;++r)if(t[r]===e)return!0;return!1}function _(t,e){if(t){var r=e.split("."),n=t;try{for(var o=0,i=r.length;o<i;++o)n=n[r[o]]}catch(t){n=void 0}return n}}function E(t,e,r){if(t){var n=e.split("."),o=n.length;if(!(o<1))if(1!==o)try{for(var i=t[n[0]]||{},a=i,s=1;s<o-1;++s)i[n[s]]=i[n[s]]||{},i=i[n[s]];i[n[o-1]]=r,t[n[0]]=a}catch(t){return}else t[n[0]]=r}}function S(){return Date.now?+Date.now():+new Date}function O(t,e,r,n){var o=s(t,e,r);return o=function(t,e){t.hostWhiteList&&!t.hostSafeList&&(t.hostSafeList=t.hostWhiteList,t.hostWhiteList=void 0,e&&e.log("hostWhiteList is deprecated. Use hostSafeList."));t.hostBlackList&&!t.hostBlockList&&(t.hostBlockList=t.hostBlackList,t.hostBlackList=void 0,e&&e.log("hostBlackList is deprecated. Use hostBlockList."));return t}(o,n),!e||e.overwriteScrubFields||e.scrubFields&&(o.scrubFields=(t.scrubFields||[]).concat(e.scrubFields)),o}function T(t){this.startTime=S(),this.counter=0,this.perMinCounter=0,this.platform=null,this.platformOptions={},this.configureGlobal(t)}function I(t,e,r){return!t.ignoreRateLimit&&e>=1&&r>e}function L(t,e,r,n,o,i,a){var s=null;return r&&(r=new Error(r)),r||n||(s=function(t,e,r,n,o){var i,a=e.environment||e.payload&&e.payload.environment;i=o?"item per minute limit reached, ignoring errors until timeout":"maxItems has been hit, ignoring errors until reset.";var s={body:{message:{body:i,extra:{maxItems:r,itemsPerMinute:n}}},language:"javascript",environment:a,notifier:{version:e.notifier&&e.notifier.version||e.version}};"browser"===t?(s.platform="browser",s.framework="browser-js",s.notifier.name="rollbar-browser-js"):"server"===t?(s.framework=e.framework||"node-js",s.notifier.name=e.notifier.name):"react-native"===t&&(s.framework=e.framework||"react-native",s.notifier.name=e.notifier.name);return s}(t,e,o,i,a)),{error:r,shouldSend:n,payload:s}}T.globalSettings={startTime:S(),maxItems:void 0,itemsPerMinute:void 0},T.prototype.configureGlobal=function(t){void 0!==t.startTime&&(T.globalSettings.startTime=t.startTime),void 0!==t.maxItems&&(T.globalSettings.maxItems=t.maxItems),void 0!==t.itemsPerMinute&&(T.globalSettings.itemsPerMinute=t.itemsPerMinute)},T.prototype.shouldSend=function(t,e){var r=(e=e||S())-this.startTime;(r<0||r>=6e4)&&(this.startTime=e,this.perMinCounter=0);var n=T.globalSettings.maxItems,o=T.globalSettings.itemsPerMinute;if(I(t,n,this.counter))return L(this.platform,this.platformOptions,n+" max items reached",!1);if(I(t,o,this.perMinCounter))return L(this.platform,this.platformOptions,o+" items per minute reached",!1);this.counter++,this.perMinCounter++;var i=!I(t,n,this.counter),a=i;return i=i&&!I(t,o,this.perMinCounter),L(this.platform,this.platformOptions,null,i,n,o,a)},T.prototype.setPlatformOptions=function(t,e){this.platform=t,this.platformOptions=e};const j=T;function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function R(){R=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new j(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(q([])));x&&x!==r&&n.call(x,a)&&(w=x);var _=b.prototype=v.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==P(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?m:h,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function q(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(P(e)+" is not iterable")}return g.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},E(S.prototype),c(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=q,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:q(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function q(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}function M(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,A(n.key),n)}}function A(t){var e=function(t,e){if("object"!=P(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==P(e)?e:e+""}var C,N,U,D=function(){function t(e,r,n,o,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rateLimiter=e,this.api=r,this.logger=n,this.options=o,this.replayManager=i,this.predicates=[],this.pendingItems=[],this.pendingRequests=[],this.retryQueue=[],this.retryHandle=null,this.waitCallback=null,this.waitIntervalID=null}return e=t,r=[{key:"configure",value:function(t){var e;null===(e=this.api)||void 0===e||e.configure(t);var r=this.options;return this.options=s(r,t),this}},{key:"addPredicate",value:function(t){return h(t)&&this.predicates.push(t),this}},{key:"addPendingItem",value:function(t){this.pendingItems.push(t)}},{key:"removePendingItem",value:function(t){var e=this.pendingItems.indexOf(t);-1!==e&&this.pendingItems.splice(e,1)}},{key:"addItem",value:function(t,e,r,n){var o=this;e&&h(e)||(e=function(){});var i=t.data,a=this._applyPredicates(i);if(a.stop)return this.removePendingItem(n),void e(a.err);if(this._maybeLog(i,r),this.removePendingItem(n),this.options.transmit){if(this.replayManager&&i.body){var s=function(t,e){for(var r=t.attributes||[],n=0;n<r.length;++n)if(r[n].key===e)return r[n].value}(i,"replay_id");s&&(t.replayId=this.replayManager.add(s,i.uuid))}this.pendingRequests.push(i);try{this._makeApiRequest(i,(function(r,n,a){o._dequeuePendingRequest(i),!r&&n&&t.replayId&&o._handleReplayResponse(t.replayId,n,a),e(r,n)}))}catch(t){this._dequeuePendingRequest(i),e(t)}}else e(new Error("Transmit disabled"))}},{key:"wait",value:function(t){var e=this;h(t)&&(this.waitCallback=t,this._maybeCallWait()||(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitIntervalID=setInterval((function(){e._maybeCallWait()}),500)))}},{key:"_applyPredicates",value:function(t){for(var e=null,r=0,n=this.predicates.length;r<n;r++)if(!(e=this.predicates[r](t,this.options))||void 0!==e.err)return{stop:!0,err:e.err};return{stop:!1,err:null}}},{key:"_makeApiRequest",value:function(t,e){var r=this,n=this.rateLimiter.shouldSend(t);n.shouldSend?this.api.postItem(t,(function(n,o,i){n?r._maybeRetry(n,t,e):e(n,o,i)})):n.error?e(n.error):this.api.postItem(n.payload,e)}},{key:"_maybeRetry",value:function(e,r,n){var o,i=!1;if(this.options.retryInterval){for(var a=0,s=t.RETRIABLE_ERRORS.length;a<s;a++)if(e.code===t.RETRIABLE_ERRORS[a]){i=!0;break}i&&(o=this.options.maxRetries,Number.isFinite(o))&&(r.retries=r.retries?r.retries+1:1,r.retries>this.options.maxRetries&&(i=!1))}i?this._retryApiRequest(r,n):n(e)}},{key:"_retryApiRequest",value:function(t,e){var r=this;this.retryQueue.push({item:t,callback:e}),this.retryHandle||(this.retryHandle=setInterval((function(){for(;r.retryQueue.length;){var t=r.retryQueue.shift();r._makeApiRequest(t.item,t.callback)}}),this.options.retryInterval))}},{key:"_dequeuePendingRequest",value:function(t){var e=this.pendingRequests.indexOf(t);-1!==e&&(this.pendingRequests.splice(e,1),this._maybeCallWait())}},{key:"_maybeLog",value:function(t,e){if(this.logger&&this.options.verbose){var r=e||_(t,"body.trace.exception.message")||_(t,"body.trace_chain.0.exception.message");if(r)return void this.logger.error(r);(r=_(t,"body.message.body"))&&this.logger.log(r)}}},{key:"_maybeCallWait",value:function(){return!(!h(this.waitCallback)||0!==this.pendingItems.length||0!==this.pendingRequests.length||(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitCallback(),0))}},{key:"_handleReplayResponse",value:(o=R().mark((function t(e,r,n){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.replayManager){t.next=3;break}return console.warn("Queue._handleReplayResponse: ReplayManager not available"),t.abrupt("return",!1);case 3:if(e){t.next=6;break}return console.warn("Queue._handleReplayResponse: No replayId provided"),t.abrupt("return",!1);case 6:if(t.prev=6,!this._shouldSendReplay(r,n)){t.next=13;break}return t.next=10,this.replayManager.send(e);case 10:return t.abrupt("return",t.sent);case 13:return this.replayManager.discard(e),t.abrupt("return",!1);case 15:t.next=21;break;case 17:return t.prev=17,t.t0=t.catch(6),console.error("Error handling replay response:",t.t0),t.abrupt("return",!1);case 21:case"end":return t.stop()}}),t,this,[[6,17]])})),i=function(){var t=this,e=arguments;return new Promise((function(r,n){var i=o.apply(t,e);function a(t){q(i,r,n,a,s,"next",t)}function s(t){q(i,r,n,a,s,"throw",t)}a(void 0)}))},function(t,e,r){return i.apply(this,arguments)})},{key:"_shouldSendReplay",value:function(t,e){return!(0!==(null==t?void 0:t.err)||!e||"true"!==e["Rollbar-Replay-Enabled"]||"0"===e["Rollbar-Replay-RateLimit-Remaining"])}}],r&&M(e.prototype,r),n&&M(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n,o,i}();C=D,U=["ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ETIMEDOUT","ECONNREFUSED","EHOSTUNREACH","EPIPE","EAI_AGAIN"],(N=A(N="RETRIABLE_ERRORS"))in C?Object.defineProperty(C,N,{value:U,enumerable:!0,configurable:!0,writable:!0}):C[N]=U;const F=D;function H(t,e){this.queue=t,this.options=e,this.transforms=[],this.diagnostic={}}H.prototype.configure=function(t){this.queue&&this.queue.configure(t);var e=this.options;return this.options=s(e,t),this},H.prototype.addTransform=function(t){return h(t)&&this.transforms.push(t),this},H.prototype.log=function(t,e){if(e&&h(e)||(e=function(){}),!this.options.enabled)return e(new Error("Rollbar is not enabled"));this.queue.addPendingItem(t);var r=t.err;this._applyTransforms(t,function(n,o){if(n)return this.queue.removePendingItem(t),e(n,null);this.queue.addItem(o,e,r,t)}.bind(this))},H.prototype._applyTransforms=function(t,e){var r=-1,n=this.transforms.length,o=this.transforms,i=this.options,a=function(t,s){t?e(t,null):++r!==n?o[r](s,i,a):e(null,s)};a(null,t)};const G=H;function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function B(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return W(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Q(n.key),n)}}function Q(t){var e=function(t,e){if("object"!=J(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==J(e)?e:e+""}var $=function(){return function(t,e,r){return e&&z(t.prototype,e),r&&z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,r){(e=Q(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}(this,"maxAdjustedCount",Math.pow(2,56)),this.config=e||{},this.triggers=(null==e?void 0:e.triggers)||[],this.context=r||{},this.predicates={occurrence:[this.isLevelMatching.bind(this),this.isSampled.bind(this)]}}),[{key:"isEnabledForTriggerType",value:function(t){var e,r=this.predicates[t],n=B(this.triggers);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(o.type===t&&this.isEnabledForTrigger(o,r))return!0}}catch(t){n.e(t)}finally{n.f()}return!1}},{key:"isEnabledForTrigger",value:function(t,e){return!e.find((function(e){return!e(t)}))}},{key:"isLevelMatching",value:function(t){var e,r;return!(t.level&&(null===(e=t.level)||void 0===e||!e.includes(null===(r=this.context)||void 0===r||null===(r=r.item)||void 0===r?void 0:r.level)))}},{key:"isSampled",value:function(t){var e=t.samplingRatio||this.config.baseSamplingRatio||1;return 1==e||this.context.replayId.slice(-14)>=(this.maxAdjustedCount*(1-e)).toString(16).padStart(14,"0")}}])}();function V(t,e,r,n,o,i,a){this.options=s(t),this.logger=r,V.rateLimiter.configureGlobal(this.options),V.rateLimiter.setPlatformOptions(a,this.options),this.api=e,this.queue=new F(V.rateLimiter,e,r,this.options,i),this.tracing=o;var u=this.options.tracer||null;Y(u)?(this.tracer=u,this.options.tracer="opentracing-tracer-enabled",this.options._configuredOptions.tracer="opentracing-tracer-enabled"):this.tracer=null,this.notifier=new G(this.queue,this.options),this.telemeter=n,Z(t),this.lastError=null,this.lastErrorHash="none"}function Z(t){t.stackTraceLimit&&(Error.stackTraceLimit=t.stackTraceLimit)}function Y(t){if(!t)return!1;if(!t.scope||"function"!=typeof t.scope)return!1;var e=t.scope();return!(!e||!e.active||"function"!=typeof e.active)}V.rateLimiter=new j({maxItems:0,itemsPerMinute:60}),V.prototype.global=function(t){return V.rateLimiter.configureGlobal(t),this},V.prototype.configure=function(t,e){var r=this.options,n={};e&&(n={payload:e}),this.options=s(r,t,n);var o=this.options.tracer||null;return Y(o)?(this.tracer=o,this.options.tracer="opentracing-tracer-enabled",this.options._configuredOptions.tracer="opentracing-tracer-enabled"):this.tracer=null,this.notifier&&this.notifier.configure(this.options),this.telemeter&&this.telemeter.configure(this.options),Z(t),this.global(this.options),Y(t.tracer)&&(this.tracer=t.tracer),this},V.prototype.log=function(t){var e=this._defaultLogLevel();return this._log(e,t)},V.prototype.debug=function(t){this._log("debug",t)},V.prototype.info=function(t){this._log("info",t)},V.prototype.warn=function(t){this._log("warning",t)},V.prototype.warning=function(t){this._log("warning",t)},V.prototype.error=function(t){this._log("error",t)},V.prototype.critical=function(t){this._log("critical",t)},V.prototype.wait=function(t){this.queue.wait(t)},V.prototype.captureEvent=function(t,e,r){return this.telemeter&&this.telemeter.captureEvent(t,e,r)},V.prototype.captureDomContentLoaded=function(t){return this.telemeter&&this.telemeter.captureDomContentLoaded(t)},V.prototype.captureLoad=function(t){return this.telemeter&&this.telemeter.captureLoad(t)},V.prototype.buildJsonPayload=function(t){return this.api.buildJsonPayload(t)},V.prototype.sendJsonPayload=function(t){this.api.postJsonPayload(t)},V.prototype._log=function(t,e){var r;if(e.callback&&(r=e.callback,delete e.callback),this.options.ignoreDuplicateErrors&&this._sameAsLastError(e)){if(r){var n=new Error("ignored identical item");n.item=e,r(n)}}else try{e.level=e.level||t;var o=this._replayIdIfTriggered(e);this._addTracingAttributes(e,o),this._addTracingInfo(e);var i=this.telemeter;i&&(i._captureRollbarItem(e),e.telemetryEvents=i.copyEvents()||[]),this.notifier.log(e,r)}catch(t){r&&r(t),this.logger.error(t)}},V.prototype._addTracingAttributes=function(t,e){var r,n,o=null===(r=this.tracing)||void 0===r?void 0:r.getSpan(),i=[{key:"replay_id",value:e},{key:"session_id",value:null===(n=this.tracing)||void 0===n?void 0:n.sessionId},{key:"span_id",value:null==o?void 0:o.spanId},{key:"trace_id",value:null==o?void 0:o.traceId}];!function(t,e){t.attributes=t.attributes||[];var r,n=u(e);try{for(n.s();!(r=n.n()).done;){var o=r.value;void 0!==o.value&&t.attributes.push(o)}}catch(t){n.e(t)}finally{n.f()}}(t.data,i),null==o||o.addEvent("rollbar.occurrence",[{key:"rollbar.occurrence.uuid",value:t.uuid}])},V.prototype._replayIdIfTriggered=function(t){var e,r=null===(e=this.tracing)||void 0===e?void 0:e.idGen(8);if(new $(this.options.recorder,{item:t,replayId:r}).isEnabledForTriggerType("occurrence"))return r},V.prototype._defaultLogLevel=function(){return this.options.logLevel||"debug"},V.prototype._sameAsLastError=function(t){if(!t._isUncaught)return!1;var e=function(t){var e=t.message||"",r=(t.err||{}).stack||String(t.err);return e+"::"+r}(t);return this.lastErrorHash===e||(this.lastError=t.err,this.lastErrorHash=e,!1)},V.prototype._addTracingInfo=function(t){if(this.tracer){var e=this.tracer.scope().active();if(function(t){if(!t||!t.context||"function"!=typeof t.context)return!1;var e=t.context();if(!e||!e.toSpanId||!e.toTraceId||"function"!=typeof e.toSpanId||"function"!=typeof e.toTraceId)return!1;return!0}(e)){e.setTag("rollbar.error_uuid",t.uuid),e.setTag("rollbar.has_error",!0),e.setTag("error",!0),e.setTag("rollbar.item_url","https://rollbar.com/item/uuid/?uuid=".concat(t.uuid)),e.setTag("rollbar.occurrence_url","https://rollbar.com/occurrence/uuid/?uuid=".concat(t.uuid));var r=e.context().toSpanId(),n=e.context().toTraceId();t.custom?(t.custom.opentracing_span_id=r,t.custom.opentracing_trace_id=n):t.custom={opentracing_span_id:r,opentracing_trace_id:n}}}};const X=V;function K(t){if(!f(t.context,"string")){var e=y(t.context);e.error?t.context="Error: could not serialize 'context'":t.context=e.value||"",t.context.length>255&&(t.context=t.context.substr(0,255))}return{data:t}}function tt(t,e,r){var n=e.hostname,o=e.protocol,i=e.port,a=e.path,s=e.search,u=t.timeout,c=function(t){var e="undefined"!=typeof window&&window||"undefined"!=typeof self&&self,r=t.defaultTransport||"xhr";void 0===e.fetch&&(r="xhr");void 0===e.XMLHttpRequest&&(r="fetch");return r}(t),l=t.proxy;if(t.endpoint){var f=r.parse(t.endpoint);n=f.hostname,o=f.protocol,i=f.port,a=f.pathname,s=f.search}return{timeout:u,hostname:n,protocol:o,port:i,path:a,search:s,proxy:l,transport:c}}function et(t,e){var r=t.protocol||"https:",n=t.port||("http:"===r?80:"https:"===r?443:void 0),o=t.hostname,i=t.path,a=t.timeout,s=t.transport;return t.search&&(i+=t.search),t.proxy&&(i=r+"//"+o+i,o=t.proxy.host||t.proxy.hostname,n=t.proxy.port,r=t.proxy.protocol||r),{timeout:a,protocol:r,hostname:o,path:i,port:n,method:e,transport:s}}function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function nt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ot(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(r),!0).forEach((function(e){it(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function it(t,e,r){return(e=function(t){var e=function(t,e){if("object"!=rt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=rt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==rt(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function at(){at=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),s=new j(n||[]);return o(a,"_invoke",{value:O(t,r,s)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",h="suspendedYield",d="executing",m="completed",y={};function v(){}function g(){}function b(){}var w={};c(w,a,(function(){return this}));var k=Object.getPrototypeOf,x=k&&k(k(P([])));x&&x!==r&&n.call(x,a)&&(w=x);var _=b.prototype=v.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,s){var u=f(t[o],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==rt(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(l).then((function(t){c.value=t,a(c)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function O(e,r,n){var o=p;return function(i,a){if(o===d)throw Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var u=T(s,n);if(u){if(u===y)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var c=f(e,r,n);if("normal"===c.type){if(o=n.done?m:h,c.arg===y)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function T(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function P(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(rt(e)+" is not iterable")}return g.prototype=b,o(_,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},E(S.prototype),c(S.prototype,s,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(_),c(_,u,"Generator"),c(_,a,(function(){return this})),c(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=P,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:P(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}function st(t,e,r,n,o,i,a){try{var s=t[i](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,o)}var ut={hostname:"api.rollbar.com",path:"/api/1/item/",search:null,version:"1",protocol:"https:",port:443},ct={hostname:"api.rollbar.com",path:"/api/1/session/",search:null,version:"1",protocol:"https:",port:443};function lt(t,e,r,n){this.options=t,this.transport=e,this.url=r,this.truncation=n,this.accessToken=t.accessToken,this.transportOptions=ft(t,r),this.OTLPTransportOptions=pt(t,r)}function ft(t,e){return tt(t,ut,e)}function pt(t,e){var r;return tt(t=ot(ot({},t),{},{endpoint:null===(r=t.tracing)||void 0===r?void 0:r.endpoint}),ct,e)}lt.prototype._postPromise=function(t){var e=t.accessToken,r=t.options,n=t.payload,o=t.headers,i=this;return new Promise((function(t,a){i.transport.post({accessToken:e,options:r,payload:n,headers:o,callback:function(e,r){return e?a(e):t(r)}})}))},lt.prototype.postItem=function(t,e){var r=et(this.transportOptions,"POST"),n=K(t),o=this;setTimeout((function(){o.transport.post({accessToken:o.accessToken,options:r,payload:n,callback:e})}),0)},lt.prototype.postSpans=function(){var t,e=(t=at().mark((function t(e){var r,n,o=arguments;return at().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},n=et(this.OTLPTransportOptions,"POST"),t.next=4,this._postPromise({accessToken:this.accessToken,options:n,payload:e,headers:r});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){st(i,n,o,a,s,"next",t)}function s(t){st(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),lt.prototype.buildJsonPayload=function(t,e){var r,n=K(t);return(r=this.truncation?this.truncation.truncate(n):y(n)).error?(e&&e(r.error),null):r.value},lt.prototype.postJsonPayload=function(t,e){var r=et(this.transportOptions,"POST");this.transport.postJsonPayload(this.accessToken,r,t,e)},lt.prototype.configure=function(t){var e=this.oldOptions;return this.options=s(e,t),this.transportOptions=ft(this.options,this.url),this.OTLPTransportOptions=pt(this.options,this.url),void 0!==this.options.accessToken&&(this.accessToken=this.options.accessToken),this};const ht=lt;var dt=!0;const mt={log:function(){dt&&console.log.apply(console,arguments)},error:function(){dt&&console.error.apply(console,arguments)},setVerbose:function(t){dt=t}};var yt="3.0.0-beta.2",vt="debug";function gt(t){return function(t){if(Array.isArray(t))return bt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return bt(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var wt=["authorization","www-authorization","http_authorization","omniauth.auth","cookie","oauth-access-token","x-access-token","x_csrf_token","http_x_csrf_token","x-csrf-token"],kt=[].concat(gt(["pw","pass","passwd","password","secret","confirm_password","confirmPassword","password_confirmation","passwordConfirmation","access_token","accessToken","X-Rollbar-Access-Token","secret_key","secretKey","secretToken"]),gt(["api_key","authenticity_token","oauth_token","token","user_session_secret"]),gt(["request.session.csrf","request.session._csrf","request.params._csrf","request.cookie","request.cookies"]));const xt=function(t,e,r){var n,o,i,a,s=f(t,"object"),u=f(t,"array"),c=[];if(r=r||{obj:[],mapped:[]},s){if(a=r.obj.indexOf(t),s&&-1!==a)return r.mapped[a]||r.obj[a];r.obj.push(t),a=r.obj.length-1}if(s)for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&c.push(n);else if(u)for(i=0;i<t.length;++i)c.push(i);var l=s?{}:[],p=!0;for(i=0;i<c.length;++i)o=t[n=c[i]],l[n]=e(n,o,r),p=p&&l[n]===t[n];return s&&!p&&(r.mapped[a]=l),p?t:l};function _t(t,e){return[t,y(t,e)]}function Et(t,e){var r=t.length;return r>2*e?t.slice(0,e).concat(t.slice(r-e)):t}function St(t,e,r){r=void 0===r?30:r;var n,o=t.data.body;if(o.trace_chain)for(var i=o.trace_chain,a=0;a<i.length;a++)n=Et(n=i[a].frames,r),i[a].frames=n;else o.trace&&(n=Et(n=o.trace.frames,r),o.trace.frames=n);return[t,y(t,e)]}function Ot(t,e){return e&&e.length>t?e.slice(0,t-3).concat("..."):e}function Tt(t,e,r){return e=xt(e,(function e(r,n,o){switch(p(n)){case"string":return Ot(t,n);case"object":case"array":return xt(n,e,o);default:return n}})),[e,y(e,r)]}function It(t){return t.exception&&(delete t.exception.description,t.exception.message=Ot(255,t.exception.message)),t.frames=Et(t.frames,1),t}function Lt(t,e){var r=t.data.body;if(r.trace_chain)for(var n=r.trace_chain,o=0;o<n.length;o++)n[o]=It(n[o]);else r.trace&&(r.trace=It(r.trace));return[t,y(t,e)]}function jt(t,e){return function(t){for(var e=0,r=t.length,n=0;n<r;n++){var o=t.charCodeAt(n);o<128?e+=1:o<2048?e+=2:o<65536&&(e+=3)}return e}(t)>e}const Pt={truncate:function(t,e,r){r=void 0===r?524288:r;for(var n,o,i,a=[_t,St,Tt.bind(null,1024),Tt.bind(null,512),Tt.bind(null,256),Lt];n=a.shift();)if(t=(o=n(t,e))[0],(i=o[1]).error||!jt(i.value,r))return i;return i},raw:_t,truncateFrames:St,truncateStrings:Tt,maybeTruncateValue:Ot},Rt=require("http"),qt=require("https"),Mt=require("json-stringify-safe");function At(){this.rateLimitExpires=0}function Ct(t,e,r){var n=e&&e.headers||{};if(n["Content-Type"]="application/json",r)try{n["Content-Length"]=Buffer.byteLength(r,"utf8")}catch(t){mt.error("Could not get the content length of the data")}return n["X-Rollbar-Access-Token"]=t,n}function Nt(t){return{"http:":Rt,"https:":qt}[t.protocol]}function Ut(){return Math.floor(Date.now()/1e3)}At.prototype.get=function(t,e,r,n,o){var i;if(n&&h(n)||(n=function(){}),function(t,e,r){(r=r||{}).access_token=t;var n,o=[];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&o.push([n,r[n]].join("="));var i="?"+o.sort().join("&");(e=e||{}).path=e.path||"";var a,s=e.path.indexOf("?"),u=e.path.indexOf("#");-1!==s&&(-1===u||u>s)?(a=e.path,e.path=a.substring(0,s)+i+"&"+a.substring(s+1)):-1!==u?(a=e.path,e.path=a.substring(0,u)+i+a.substring(u)):e.path=e.path+i}(t,e=e||{},r),e.headers=Ct(t,e),!(i=o?o(e):Nt(e)))return mt.error("Unknown transport based on given protocol: "+e.protocol),n(new Error("Unknown transport"));var a=i.request(e,function(t){this.handleResponse(t,n)}.bind(this));a.on("error",(function(t){n(t)})),a.end()},At.prototype.post=function(t){var e,r=t.accessToken,n=t.options,o=t.payload,i=t.callback,a=t.transportFactory;if(i&&h(i)||(i=function(){}),Ut()<this.rateLimitExpires)return i(new Error("Exceeded rate limit"));if(n=n||{},!o)return i(new Error("Cannot send empty request"));var s=Pt.truncate(o,Mt);if(s.error)return mt.error("Problem stringifying payload. Giving up"),i(s.error);var u=s.value;if(n.headers=Ct(r,n,u),!(e=a?a(n):Nt(n)))return mt.error("Unknown transport based on given protocol: "+n.protocol),i(new Error("Unknown transport"));var c=e.request(n,function(t){this.handleResponse(t,function(t){return function(e,r){if(e)return t(e);r.result&&r.result.uuid?mt.log(["Successful api response."," Link: https://rollbar.com/occurrence/uuid/?uuid="+r.result.uuid].join("")):mt.log("Successful api response"),t(null,r.result)}}(i))}.bind(this));c.on("error",(function(t){i(t)})),u&&c.write(u),c.end()},At.prototype.updateRateLimit=function(t){var e=parseInt(t.headers["x-rate-limit-remaining"]||0),r=Math.min(60,t.headers["x-rate-limit-remaining-seconds"]||0),n=Ut();429===t.statusCode&&0===e?this.rateLimitExpires=n+r:this.rateLimitExpires=n},At.prototype.handleResponse=function(t,e){this.updateRateLimit(t);var r=[];t.setEncoding("utf8"),t.on("data",(function(t){r.push(t)})),t.on("end",(function(){!function(t,e){var r=function(t){var e,r;try{e=JSON.parse(t)}catch(t){r=t}return{error:r,value:e}}(t);if(r.error)return mt.error("Could not parse api response, err: "+r.error),e(r.error);if((t=r.value).err)return mt.error("Received error: "+t.message),e(new Error("Api error: "+(t.message||"Unknown error")));e(null,t)}(r=r.join(""),e)}))};const Dt=At,Ft=require("url");function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}var Gt=["otelAttributes"];function Jt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Bt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(r),!0).forEach((function(e){Wt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Wt(t,e,r){return(e=Qt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qt(n.key),n)}}function Qt(t){var e=function(t,e){if("object"!=Ht(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=Ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==Ht(e)?e:e+""}function $t(t,e){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.add(t)}function Vt(t,e,r){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var Zt=100;function Yt(t){return[Math.trunc(t/1e3),Math.round(t%1e3*1e6)]}var Xt=new WeakSet,Kt=function(){return function(t,e,r){return e&&zt(t.prototype,e),r&&zt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}((function t(e,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),$t(this,Xt),this.queue=[],this.options=s(e);var o=this.options.maxTelemetryEvents||Zt;this.maxQueueSize=Math.max(0,Math.min(o,Zt)),this.tracing=r,this.telemetrySpan=null===(n=this.tracing)||void 0===n?void 0:n.startSpan("rollbar-telemetry",{})}),[{key:"configure",value:function(t){var e=this.options;this.options=s(e,t);var r=this.options.maxTelemetryEvents||Zt,n=Math.max(0,Math.min(r,Zt)),o=0;this.queue.length>n&&(o=this.queue.length-n),this.maxQueueSize=n,this.queue.splice(0,o)}},{key:"copyEvents",value:function(){var t=Array.prototype.slice.call(this.queue,0);if(h(this.options.filterTelemetry))try{for(var e=t.length;e--;)this.options.filterTelemetry(t[e])&&t.splice(e,1)}catch(t){this.options.filterTelemetry=null}return t=t.filter((function(t){return"connectivity"!==t.type})),t=t.map((function(t){t.otelAttributes;var e=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r={};for(var n in t)if({}.hasOwnProperty.call(t,n)){if(-1!==e.indexOf(n))continue;r[n]=t[n]}return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],-1===e.indexOf(r)&&{}.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(t,Gt);return e})),t}},{key:"exportTelemetrySpan",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.telemetrySpan&&(this.telemetrySpan.end(t),this.telemetrySpan=this.tracing.startSpan("rollbar-telemetry",{}))}},{key:"capture",value:function(t,e,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a={level:ne(t,r),type:t,timestamp_ms:o||S(),body:e,source:"client"};n&&(a.uuid=n),i&&(a.otelAttributes=i);try{if(h(this.options.filterTelemetry)&&this.options.filterTelemetry(a))return!1}catch(t){this.options.filterTelemetry=null}return this.push(a),a}},{key:"captureEvent",value:function(t,e,r,n){return this.capture(t,e,r,n)}},{key:"captureError",value:function(t,e,r,n){var o,i=t.message||String(t),a={message:i};t.stack&&(a.stack=t.stack);var s={message:i,level:e,type:"error",uuid:r};return null===(o=this.telemetrySpan)||void 0===o||o.addEvent("rollbar-occurrence-event",s,Yt(n)),this.capture("error",a,e,r,n,s)}},{key:"captureLog",value:function(t,e,r,n){var o,i,a=null;r?(a={message:t,level:e,type:"message",uuid:r},null===(o=this.telemetrySpan)||void 0===o||o.addEvent("rollbar-occurrence-event",a,Yt(n))):(a={message:t,level:e},null===(i=this.telemetrySpan)||void 0===i||i.addEvent("rollbar-log-event",a,Yt(n)));return this.capture("log",{message:t},e,r,n,a)}},{key:"captureNetwork",value:function(t,e,r,n){var o,i;e=e||"xhr",t.subtype=t.subtype||e,n&&(t.request=n);var a=this.levelFromStatus(t.status_code),s=1e6*(t.end_time_ms||0),u={type:t.subtype,method:t.method,url:t.url,statusCode:t.status_code,"request.headers":JSON.stringify(t.request_headers||{}),"response.headers":JSON.stringify((null===(o=t.response)||void 0===o?void 0:o.headers)||{}),"response.timeUnixNano":s.toString()};return null===(i=this.telemetrySpan)||void 0===i||i.addEvent("rollbar-network-event",u,Yt(t.start_time_ms)),this.capture("network",t,a,r,t.start_time_ms,u)}},{key:"levelFromStatus",value:function(t){return t>=200&&t<400?"info":0===t||t>=400?"error":"info"}},{key:"captureDom",value:function(t,e,r,n,o){var i={subtype:t,element:e};return void 0!==r&&(i.value=r),void 0!==n&&(i.checked=n),this.capture("dom",i,"info",o)}},{key:"captureInput",value:function(t){var e,r=t.type,n=t.isSynthetic,o=t.element,i=t.value,a=t.timestamp,s="rollbar-input-event",u={type:s,subtype:r,element:o,value:i},c={type:r,isSynthetic:n,element:o,value:i,endTimeUnixNano:Yt(a)},l=Vt(Xt,this,te).call(this,s,c);return l?Vt(Xt,this,ee).call(this,l,c,a):(null===(e=this.telemetrySpan)||void 0===e||e.addEvent(s,c,Yt(a)),this.capture("dom",u,"info",null,a,c))}},{key:"captureClick",value:function(t){var e,r=t.type,n=t.isSynthetic,o=t.element,i=t.timestamp,a="rollbar-click-event",s={type:a,subtype:r,element:o},u={type:r,isSynthetic:n,element:o,endTimeUnixNano:Yt(i)},c=Vt(Xt,this,te).call(this,a,u);return c?Vt(Xt,this,ee).call(this,c,u,i):(null===(e=this.telemetrySpan)||void 0===e||e.addEvent(a,u,Yt(i)),this.capture("dom",s,"info",null,i,u))}},{key:"captureFocus",value:function(t){var e,r=t.type,n=t.isSynthetic,o=t.element,i=t.timestamp,a="rollbar-focus-event",s={type:a,subtype:r,element:o},u={type:r,isSynthetic:n,element:o};return null===(e=this.telemetrySpan)||void 0===e||e.addEvent(a,u,Yt(i)),this.capture("dom",s,"info",null,i,u)}},{key:"captureResize",value:function(t){var e,r=t.type,n=t.isSynthetic,o=t.width,i=t.height,a=t.textZoomRatio,s=t.timestamp,u="rollbar-resize-event",c={type:u,subtype:r,width:o,height:i,textZoomRatio:a},l={type:r,isSynthetic:n,width:o,height:i,textZoomRatio:a},f=Vt(Xt,this,te).call(this,u,l);return f?Vt(Xt,this,ee).call(this,f,l,s):(null===(e=this.telemetrySpan)||void 0===e||e.addEvent(u,l,Yt(s)),this.capture("dom",c,"info",null,s,l))}},{key:"captureDragDrop",value:function(t){var e,r=t.type,n=t.isSynthetic,o=t.element,i=t.dropEffect,a=t.effectAllowed,s=t.kinds,u=t.mediaTypes,c=t.timestamp,l="rollbar-dragdrop-event",f={type:l,subtype:r,isSynthetic:n},p={type:r,isSynthetic:n};return"dragstart"===r&&(f=Bt(Bt({},f),{},{element:o,dropEffect:i,effectAllowed:a}),p=Bt(Bt({},p),{},{element:o,dropEffect:i,effectAllowed:a})),"drop"===r&&(f=Bt(Bt({},f),{},{element:o,dropEffect:i,effectAllowed:a,kinds:s,mediaTypes:u}),p=Bt(Bt({},p),{},{element:o,dropEffect:i,effectAllowed:a,kinds:s,mediaTypes:u})),null===(e=this.telemetrySpan)||void 0===e||e.addEvent(l,p,Yt(c)),this.capture("dom",f,"info",null,c,p)}},{key:"captureNavigation",value:function(t,e,r,n){var o;return null===(o=this.telemetrySpan)||void 0===o||o.addEvent("rollbar-navigation-event",{"previous.url.full":t,"url.full":e},Yt(n)),this.capture("navigation",{from:t,to:e},"info",r,n)}},{key:"captureDomContentLoaded",value:function(t){return this.capture("navigation",{subtype:"DOMContentLoaded"},"info",void 0,t&&t.getTime())}},{key:"captureLoad",value:function(t){return this.capture("navigation",{subtype:"load"},"info",void 0,t&&t.getTime())}},{key:"captureConnectivityChange",value:function(t){var e,r=t.type,n=t.isSynthetic,o=t.timestamp,i="rollbar-connectivity-event",a={type:i,subtype:r},s={type:r,isSynthetic:n};return null===(e=this.telemetrySpan)||void 0===e||e.addEvent(i,s,Yt(o)),this.capture("connectivity",a,"info",null,o,s)}},{key:"_captureRollbarItem",value:function(t){if(this.options.includeItemsInTelemetry)return t.err?this.captureError(t.err,t.level,t.uuid,t.timestamp):t.message?this.captureLog(t.message,t.level,t.uuid,t.timestamp):t.custom?this.capture("log",t.custom,t.level,t.uuid,t.timestamp):void 0}},{key:"push",value:function(t){this.queue.push(t),this.queue.length>this.maxQueueSize&&this.queue.shift()}}])}();function te(t,e){var r=Vt(Xt,this,re).call(this,this.queue);if(r&&r.body.type===t&&r.otelAttributes.target===e.target)return r}function ee(t,e,r){var n=Math.max(r-t.timestamp_ms,1);t.body.value=e.value,t.otelAttributes.value=e.value,t.otelAttributes.height=e.height,t.otelAttributes.width=e.width,t.otelAttributes.textZoomRatio=e.textZoomRatio,t.otelAttributes.endTimeUnixNano=Yt(r),t.otelAttributes.durationUnixNano=Yt(n),t.otelAttributes.count=(t.otelAttributes.count||1)+1,t.otelAttributes.ratio=t.otelAttributes.count/(n/1e3)}function re(t){return t.length>0?t[t.length-1]:null}function ne(t,e){if(e)return e;return{error:"error",manual:"info"}[t]||"info"}const oe=Kt;const ie=function(t,e,r,n,o){var i=t[e];t[e]=r(i),n&&n[o].push([t,e,i])};function ae(t){var e={protocol:t.protocol,hostname:"string"==typeof t.hostname&&t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:"".concat(t.pathname||"").concat(t.search||""),href:t.href};return""!==t.port&&(e.port=Number(t.port)),(t.username||t.password)&&(e.auth="".concat(t.username,":").concat(t.password)),e}function se(t){var e=t.protocol||"http:";return e+="//",t.auth&&(e+="".concat(t.auth,"@")),e+=t.hostname||t.host||"localhost",t.port&&(e+=":".concat(t.port)),e+=t.path||"/"}var ue={network:!0,networkResponseHeaders:!1,networkRequestHeaders:!1,log:!0};function ce(t,e,r){this.options=t;var n=t.autoInstrument;!1===t.enabled||!1===n?this.autoInstrument={}:(f(n,"object")||(n=ue),this.autoInstrument=s(ue,n)),this.telemeter=e,this.rollbar=r,this.diagnostic=r.client.notifier.diagnostic,this.replacements={network:[],log:[]}}function le(t){var e=this.telemeter,r=this;return function(n,o,i){var a=function(t,e,r){if("string"==typeof t){var n=t;t=ae(new Ft.URL(n))}else t&&t instanceof Ft.URL?t=ae(t):(r=e,e=t,t=null);return"function"==typeof e?(r=e,e=t||{}):e=s(t||{},e),{options:e,cb:r}}(n,o,i),u={method:a.options.method||"GET",url:se(a.options),status_code:null,start_time_ms:S(),end_time_ms:null};r.autoInstrument.networkRequestHeaders&&(u.request_headers=a.options.headers),e.captureNetwork(u,"http");var c=Array.from(arguments),l=function(t,e,r){return function(n){if(e.end_time_ms=S(),e.status_code=n.statusCode,e.response={},t.networkResponseHeaders&&(e.response.headers=n.headers),r)return r.apply(void 0,arguments)}}(r.autoInstrument,u,a.cb);a.cb&&c.pop(),c.push(l);var f=t.apply(qt,c);return f.on("error",(function(t){u.status_code=0,u.error=[t.name,t.message].join(": ")})),f}}function fe(t,e){for(var r;t[e].length;)(r=t[e].shift())[0][r[1]]=r[2]}ce.prototype.configure=function(t){this.options=s(this.options,t);var e=t.autoInstrument,r=s(this.autoInstrument);!1===t.enabled||!1===e?this.autoInstrument={}:(f(e,"object")||(e=ue),this.autoInstrument=s(ue,e)),this.instrument(r)},ce.prototype.instrument=function(t){!this.autoInstrument.network||t&&t.network?!this.autoInstrument.network&&t&&t.network&&this.deinstrumentNetwork():this.instrumentNetwork(),!this.autoInstrument.log||t&&t.log?!this.autoInstrument.log&&t&&t.log&&this.deinstrumentConsole():this.instrumentConsole()},ce.prototype.deinstrumentNetwork=function(){fe(this.replacements,"network")},ce.prototype.instrumentNetwork=function(){ie(Rt,"request",le.bind(this),this.replacements,"network"),ie(qt,"request",le.bind(this),this.replacements,"network")},ce.prototype.captureNetwork=function(t,e,r){return this.telemeter.captureNetwork(t,e,r)},ce.prototype.deinstrumentConsole=function(){fe(this.replacements,"log")},ce.prototype.instrumentConsole=function(){var t=this.telemeter,e=process.stdout;ie(e,"write",(function(r){return function(n){return t.captureLog(n,"info"),r.apply(e,arguments)}}),this.replacements,"log");var r=process.stderr;ie(r,"write",(function(e){return function(n){return t.captureLog(n,"error"),e.apply(r,arguments)}}),this.replacements,"log")};const pe=ce,he=require("async"),de=require("fs"),me=require("lru-cache"),ye=require("source-map"),ve=require("path");var ge={},be={},we={},ke=/^data:application\/json[^,]+base64,/;function xe(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,(function(t,e){return e?"":"/"}))),t in ge)return ge[t];var e="";try{de.existsSync(t)&&(e=de.readFileSync(t,"utf8"))}catch(t){}return ge[t]=e}function _e(t,e){if(!t)return e;var r=ve.dirname(t),n=/^\w+:\/\/[^\/]*/.exec(r),o=n?n[0]:"",i=r.slice(o.length);return o&&/^\/\w\:/.test(i)?(o+="/")+ve.resolve(r.slice(o.length),e).replace(/\\/g,"/"):o+ve.resolve(r.slice(o.length),e)}function Ee(t){var e,r=function(t){var e;e=xe(t);for(var r,n,o=/(?:\/\/[@#][ \t]+sourceMappingURL=([^\s'"]+?)[ \t]*$)|(?:\/\*[@#][ \t]+sourceMappingURL=([^\*]+?)[ \t]*(?:\*\/)[ \t]*$)/gm;n=o.exec(e);)r=n;return r?r[1]:null}(t);if(!r)return null;if(ke.test(r)){var n=r.slice(r.indexOf(",")+1);e=Buffer.from(n,"base64").toString(),r=t}else e=xe(r=_e(t,r));return e?{url:r,map:e}:null}function Se(t,e){var r=be[t.source];if(!r){var n=Ee(t.source);n?(r=be[t.source]={url:n.url,map:new ye.SourceMapConsumer(n.map)},e.node_source_maps.source_mapping_urls[t.source]=n.url,r.map.sourcesContent&&r.map.sources.forEach((function(t,e){var n=r.map.sourcesContent[e];if(n){var o=_e(r.url,t);ge[o]=n}}))):(r=be[t.source]={url:null,map:null},e.node_source_maps.source_mapping_urls[t.source]="not found")}if(r&&r.map&&"function"==typeof r.map.originalPositionFor){var o=r.map.originalPositionFor(t);if(null!==o.source){var i=o.source;return o.source=_e(r.url,o.source),function(t,e,r){we[r]||(we[r]=t.map.sourceContentFor(e,!0))}(r,i,o.source),o}}return t}function Oe(t){return we[t]}function Te(t){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Te(t)}var Ie=/^\s*at (?:([^(]+(?: \[\w\s+\])?(?:.*\)*)) )?\(?(.+?)(?::(\d+):(\d+)(?:, <js>:(\d+):(\d+))?)?\)?$/,Le=/^\s*at .+ \(.+ (at[^)]+\))\)$/,je=/^\s*(>?) [0-9]+\|(\s*.+)$/m,Pe=new me({max:100}),Re={};function qe(t,e){var r,n,o,i,a;if((r=(n=t).match(Le))&&(n=r[1]),!(r=n.match(Ie)))return e(null,null);var s={source:(o=r.slice(1))[1],line:Math.floor(o[2]),column:Math.floor(o[3])-1};a=this.useSourceMaps?function(t,e){return Se({source:t.source,line:t.line,column:t.column},e)}(s,this.diagnostic):s,i={method:o[0]||"<unknown>",filename:a.source,lineno:a.line,colno:a.column,runtimePosition:s},o[4]&&(i.compiled_lineno=Math.floor(o[4])),o[5]&&(i.compiled_colno=Math.floor(o[5])),e(null,i)}function Me(t,e){var r,n;r="/"===t[0]||"."===t[0],n=!!Pe.get(t),e(null,r&&!n&&!!!Re[t])}function Ae(t,e){if(Oe(t))return e(null,!0);de.stat(t,(function(t){e(null,!t)}))}function Ce(t,e){var r=[];t.forEach((function(t){-1===r.indexOf(t.filename)&&r.push(t.filename)})),he.filter(r,Me,(function(r,n){if(r)return e(r);var o;function i(t,e){o[t]=e,Pe.set(t,e)}function a(t,e){var r=Oe(t);if(r)try{var n=r.split("\n");return i(t,n),e(null)}catch(t){return e(t)}!function(t,e){try{de.readFile(t,(function(t,r){var n;return t?e(t):(n=r.toString("utf8").split("\n"),e(null,n))}))}catch(t){mt.log(t)}}(t,(function(r,n){return r?e(r):(i(t,n),e(null))}))}function s(t,e){var r=o[t.filename]||Pe.get(t.filename);r&&function(t,e){t.code=e[t.lineno-1],t.context={pre:e.slice(Math.max(0,t.lineno-4),t.lineno-1),post:e.slice(t.lineno,t.lineno+3)}}(t,r),e(null)}o={},he.filter(n,Ae,(function(r,n){if(r)return e(r);he.each(n,a,(function(r){if(r)return e(r);he.eachSeries(t,s,(function(r){if(r)return e(r);e(null,t)}))}))}))}))}function Ne(t,e,n,o){var i=function(t){var e,n;if(null==t)return null;if("object"!==Te(t))return null;if(r.isArray(t))return t;for(n in e=[],t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(t[n]);return e}(t.errors);return function(t,e,r,n){var o,i=t;for(;"object"===Te(i);)i=i&&i.stack;o=(i||"").split("\n").slice(1),e.nodeSourceMaps&&(r.diagnostic.node_source_maps={},r.diagnostic.node_source_maps.source_mapping_urls={});he.map(o,qe.bind({useSourceMaps:e.nodeSourceMaps,diagnostic:r.diagnostic}),(function(t,e){if(t)return n(t);e.reverse(),he.filter(e,(function(t,e){e(null,!!t)}),(function(t,e){if(t)return n(t);Ce(e,n)}))}))}(t.stack,e,n,(function(e,r){var a,s,u,c,l;return e?(mt.error("could not parse exception, err: "+e),o(e)):(a=String(t.message||"<no message>"),s=String(t.name||"<unknown>"),u={class:s,message:a,frames:r},i&&i.length&&(c=i[0],u={class:s,message:String(c.message||"<no message>"),frames:r}),a.match(je)&&(l=function(t){var e,r,n,o,i,a,s,u,c,l,f;for(r=(e=t.split("\n"))[0].indexOf(":"),n=e[0].slice(0,r),o=parseInt(e[0].slice(r+1),10),a=e[(i=e.length)-1],e=e.slice(1,i-1),c=[],l=[],s=0;s<i-2;++s)(f=e[s].match(je))&&(">"===f[1]?u=f[2]:u?f[2]&&l.push(f[2]):f[2]&&c.push(f[2]));return{frame:{method:"<jade>",filename:n,lineno:o,code:u,context:{pre:c=c.slice(0,Math.min(c.length,3)),post:l=l.slice(0,Math.min(l.length,3))}},message:a}}(a),u.message=l.message,u.frames.push(l.frame)),n.localsMap?void n.notifier.locals.mergeLocals(n.localsMap,r,t.stack,(function(t){return t&&(mt.error("could not parse locals, err: "+t),n.diagnostic["error parsing locals"]=t),o(null,u)})):o(null,u))}))}const Ue=require("request-ip");function De(t,e){var r=e.split("."),n=r.length-1;try{for(var o=0;o<=n;++o)o<n?t=t[r[o]]:t[r[o]]="********"}catch(t){}}const Fe=function(t,e,r){if(e=e||[],r)for(var n=0;n<r.length;++n)De(t,r[n]);var o=function(t){for(var e,r=[],n=0;n<t.length;++n)e="^\\[?(%5[bB])?"+t[n]+"\\[?(%5[bB])?\\]?(%5[dD])?$",r.push(new RegExp(e,"i"));return r}(e),i=function(t){for(var e,r=[],n=0;n<t.length;++n)e="\\[?(%5[bB])?"+t[n]+"\\[?(%5[bB])?\\]?(%5[dD])?",r.push(new RegExp("("+e+"=)([^&\\n]+)","igm"));return r}(e);function a(t,e){return e+"********"}return xt(t,(function t(e,r,n){var s=function(t,e){var r;for(r=0;r<o.length;++r)if(o[r].test(t)){e="********";break}return e}(e,r);return s===r?f(r,"object")||f(r,"array")?xt(r,t,n):function(t){var e;if(f(t,"string"))for(e=0;e<i.length;++e)t=t.replace(i[e],a);return t}(s):s}))};function He(t,e,r){var n=e.payload&&e.payload.environment||e.environment,o={timestamp:Math.round(t.timestamp/1e3),environment:t.environment||n,level:t.level||"error",language:"javascript",framework:t.framework||e.framework,uuid:t.uuid,notifier:JSON.parse(JSON.stringify(e.notifier)),custom:t.custom};e.codeVersion?o.code_version=e.codeVersion:e.code_version&&(o.code_version=e.code_version),Object.getOwnPropertyNames(t.custom||{}).forEach((function(e){o.hasOwnProperty(e)||(o[e]=t.custom[e])})),o.server={host:e.host,argv:process.argv.concat(),pid:process.pid},e.branch&&(o.server.branch=e.branch),e.root&&(o.server.root=e.root),t.data=o,r(null,t)}function Ge(t,e,r){t.stackInfo?function(t,e,r){t.stackInfo&&(t.data=t.data||{},t.data.body=t.data.body||{},t.data.body.trace_chain=t.stackInfo),r(null,t)}(t,0,r):function(t,e,r){t.data=t.data||{},t.data.body=t.data.body||{};var n=t.message||"Item sent with null or missing arguments.";t.data.body.message={body:n},r(null,t)}(t,0,r)}function Je(t,e,r){if(!t.err)return r(null,t);var n=t.err,o=[],i=[];do{o.push(n),n=n.nested||n.cause}while(n);t.stackInfo=i,e.addErrorContext&&function(t,e){var r=t.data.custom||{},n=!1;try{for(var o=0;o<e.length;++o)e[o].hasOwnProperty("rollbarContext")&&(r=s(r,g(e[o].rollbarContext)),n=!0);n&&(t.data.custom=r)}catch(e){t.diagnostic.error_context="Failed: "+e.message}}(t,o);he.eachSeries(o,function(t,e,r){return function(n,o){Ne(n,e,r,(function(e,r){return e?o(e):(t.push({frames:r.frames,exception:{class:r.class,message:r.message}}),o(null))}))}}(i,e,t),(function(e){e&&(t.message=t.err.message||t.err.description||t.message||String(t.err),t.diagnostic.buildTraceData=e.message,delete t.stackInfo),r(null,t)}))}function Be(t,e,r){t.data=t.data||{};var n=t.request;if(n){var o=n.baseUrl||"";if(e.addRequestData&&h(e.addRequestData))return e.addRequestData(t.data,n),void r(null,t);var i,a=function(t){var e,r=t.headers||{},n=r.host||"<no host>",o=t.protocol||(t.socket&&t.socket.encrypted?"https":"http"),i=t.baseUrl||"";if(f(t.url,"string")){var a=i&&i.length?i+t.url:t.url;e=Ft.parse(a,!0)}else e=t.url||{};e.protocol=e.protocol||o,e.host=e.host||n;var s={url:Ft.format(e),user_ip:$e(t),headers:r,method:t.method};e.search&&e.search.length>0&&(s.GET=e.query);var u=t.body||t.payload;if(u){var c={};if("object"===(h=p(u))||"array"===h){for(var l in u)Object.prototype.hasOwnProperty.call(u,l)&&(c[l]=u[l]);s[t.method]=c}else s.body=u}var h;return s}(n);if(function(t,e){if(t&&t.user_ip&&!0!==e){var r=t.user_ip;if(e)try{var n;if(-1!==r.indexOf("."))(n=r.split(".")).pop(),n.push("0"),r=n.join(".");else if(-1!==r.indexOf(":")){if((n=r.split(":")).length>2){var o=n.slice(0,3),i=o[2].indexOf("/");-1!==i&&(o[2]=o[2].substring(0,i)),r=o.concat("0000:0000:0000:0000:0000").join(":")}}else r=null}catch(t){r=null}else r=null;t.user_ip=r}}(a,e.captureIp),t.data.request=a,n.route)i=n.route.path,t.data.context=o&&o.length?o+i:i;else try{i=n.app._router.matchRequest(n).path,t.data.context=o&&o.length?o+i:i}catch(t){}var s=e.captureEmail,u=e.captureUsername;if(n.rollbar_person){var c=n.rollbar_person;!s&&c.email&&(c.email=null),!u&&c.username&&(c.username=null),t.data.person=c}else if(n.user)t.data.person={id:n.user.id},n.user.username&&u&&(t.data.person.username=n.user.username),n.user.email&&s&&(t.data.person.email=n.user.email);else if(n.user_id||n.userId){var l=n.user_id||n.userId;h(l)&&(l=l()),t.data.person={id:l}}r(null,t)}else r(null,t)}function We(t,e,r){var n=t.lambdaContext;if(n){var o={remainingTimeInMillis:n.getRemainingTimeInMillis(),callbackWaitsForEmptyEventLoop:n.callbackWaitsForEmptyEventLoop,functionName:n.functionName,functionVersion:n.functionVersion,arn:n.invokedFunctionArn,requestId:n.awsRequestId};t.data=t.data||{},t.data.custom=t.data.custom||{},t.data.custom.lambda=o,r(null,t)}else r(null,t)}function ze(t,e,r){var n=e.scrubHeaders||[],o=e.scrubFields||[],i=e.scrubPaths||[];o=n.concat(o),function(t,e){if(!t||!e.scrubRequestBody)return;try{("string"==typeof(r=t.body)||r instanceof String)&&Qe(t)&&(t.body=JSON.parse(t.body))}catch(e){t.body=null,t.error="request.body parse failed: "+e.message}var r}(t.data.request,e),t.data=Fe(t.data,o,i),function(t,e){if(!t||!e.scrubRequestBody)return;try{d(t.body)&&Qe(t)&&(t.body=JSON.stringify(t.body))}catch(e){t.body=null,t.error="request.body serialization failed: "+e.message}}(t.data.request,e),r(null,t)}function Qe(t){return t.headers&&t.headers["content-type"]&&t.headers["content-type"].includes("json")}function $e(t){var e=t.ip;return e||(e=Ue.getClientIp(t)),e}function Ve(t,e,r){t._isUncaught&&(t.data._isUncaught=!0),t._originalArgs&&(t.data._originalArgs=t._originalArgs),r(null,t)}function Ze(t,e,r){var n=e.payload||{};n.body&&delete n.body,t.data=s(t.data,n),r(null,t)}function Ye(t,e,r){t.telemetryEvents&&E(t,"data.body.telemetry",t.telemetryEvents),r(null,t)}function Xe(t,e,r){if(t.message){var n="data.body.trace_chain.0",o=_(t,n);if(o||(o=_(t,n="data.body.trace")),o){if(!o.exception||!o.exception.description)return E(t,n+".exception.description",t.message),void r(null,t);var i=_(t,n+".extra")||{};E(t,n+".extra",s(i,{message:t.message}))}r(null,t)}else r(null,t)}function Ke(t){return function(e,r,n){var o,i=s(e),a=null;try{h(r.transform)&&(a=r.transform(i.data,e))}catch(o){return r.transform=null,t.error("Error while calling custom transform() function. Removing custom transform().",o),void n(null,e)}d(o=a)&&f(o.then,"function")?a.then((function(t){t&&(i.data=t),n(null,i)}),(function(t){n(t,e)})):n(null,i)}}function tr(t,e,r){if(!e.sendConfig)return r(null,t);var n=_(t,"data.custom")||{};n._rollbarConfig=e,t.data.custom=n,r(null,t)}function er(t,e){h(t[e])&&(t[e]=t[e].toString())}function rr(t,e,r){var n=e._configuredOptions;er(n,"transform"),er(n,"checkIgnore"),er(n,"onSendCallback"),delete n.accessToken,t.data.notifier.configured_options=n,r(null,t)}function nr(t,e,r){var n=s(t.notifier.client.notifier.diagnostic,t.diagnostic);if(_(t,"err._isAnonymous")&&(n.is_anonymous=!0),t._isUncaught&&(n.is_uncaught=t._isUncaught),t.err)try{n.raw_error={message:t.err.message,name:t.err.name,constructor_name:t.err.constructor&&t.err.constructor.name,filename:t.err.fileName,line:t.err.lineNumber,column:t.err.columnNumber,stack:t.err.stack}}catch(t){n.raw_error={failed:String(t)}}t.data.notifier.diagnostic=s(t.data.notifier.diagnostic,n),r(null,t)}function or(t,e){var r=t.level,n=m[r]||0,o=e.reportLevel;return!(n<(m[o]||0))}function ir(t,e,r){if(!t)return!r;var n,o,i=t.frames;if(!i||0===i.length)return!r;for(var a=e.length,s=i.length,u=0;u<s;u++){if(!f(n=i[u].filename,"string"))return!r;for(var c=0;c<a;c++)if(o=e[c],new RegExp(o).test(n))return!0}return!1}function ar(t,e,r,n){var o,i,a=!1;"blocklist"===r&&(a=!0);try{if(o=a?e.hostBlockList:e.hostSafeList,i=_(t,"body.trace_chain")||[_(t,"body.trace")],!o||0===o.length)return!a;if(0===i.length||!i[0])return!a;for(var s=i.length,u=0;u<s;u++)if(ir(i[u],o,a))return!0}catch(t){a?e.hostBlockList=null:e.hostSafeList=null;var c=a?"hostBlockList":"hostSafeList";return n.error("Error while reading your configuration's "+c+" option. Removing custom "+c+".",t),!a}return!1}function sr(t){return function(e,r){var n,o,i,a,s,u;try{if(!(i=r.ignoredMessages)||0===i.length)return!0;if(u=function(t){var e=t.body,r=[];if(e.trace_chain)for(var n=e.trace_chain,o=0;o<n.length;o++){var i=n[o];r.push(_(i,"exception.message"))}e.trace&&r.push(_(e,"trace.exception.message"));e.message&&r.push(_(e,"message.body"));return r}(e),0===u.length)return!0;for(a=i.length,n=0;n<a;n++)for(s=new RegExp(i[n],"gi"),o=0;o<u.length;o++)if(s.test(u[o]))return!1}catch(e){r.ignoredMessages=null,t.error("Error while reading your configuration's ignoredMessages option. Removing custom ignoredMessages.")}return!0}}function ur(t,e){if(f(t,"string")){var r=t;(t={}).accessToken=r}void 0!==t.minimumLevel&&(t.reportLevel=t.minimumLevel,delete t.minimumLevel),this.options=O(ur.defaultOptions,t,null,mt),this.options._configuredOptions=t,delete this.options.maxItems,this.options.environment=this.options.environment||"unspecified",mt.setVerbose(this.options.verbose),this.lambdaContext=null,this.lambdaTimeoutHandle=null;var n=new Dt,o=new ht(this.options,n,Ft,Pt,Mt),i=new oe(this.options);this.client=e||new X(this.options,o,mt,i,null,null,"server"),this.instrumenter=new pe(this.options,this.client.telemeter,this),this.instrumenter.instrument(),this.options.locals&&(this.locals=cr(this.options.locals,mt)),function(t){t.addTransform(He).addTransform(Je).addTransform(Ge).addTransform(Xe).addTransform(Ye).addTransform(Be).addTransform(We).addTransform(tr).addTransform(ze).addTransform(Ze).addTransform(Ke(mt)).addTransform(rr).addTransform(nr).addTransform(Ve)}(this.client.notifier),function(t){t.addPredicate(or).addPredicate(function(t){return function(e,r){var n=!!e._isUncaught;delete e._isUncaught;var o=e._originalArgs;delete e._originalArgs;try{h(r.onSendCallback)&&r.onSendCallback(n,o,e)}catch(e){r.onSendCallback=null,t.error("Error while calling onSendCallback, removing",e)}try{if(h(r.checkIgnore)&&r.checkIgnore(n,o,e))return!1}catch(e){r.checkIgnore=null,t.error("Error while calling custom checkIgnore(), removing",e)}return!0}}(mt)).addPredicate(function(t){return function(e,r){return!ar(e,r,"blocklist",t)}}(mt)).addPredicate(function(t){return function(e,r){return ar(e,r,"safelist",t)}}(mt)).addPredicate(sr(mt))}(this.client.queue),this.setupUnhandledCapture()}function cr(t,e){var r;if(process.versions.node.split(".")[0]<10)return null;if("function"==typeof t)r=t,t=null;else{if(!f(t,"object"))return e.error("options.locals or options.locals.module must be a Locals module"),null;r=t.module,delete t.module}return new r(t,e)}var lr=null;function fr(t){var e="Rollbar is not initialized";mt.error(e),t&&t(new Error(e))}function pr(t){for(var e=0,r=t.length;e<r;++e)if(h(t[e]))return t[e]}function hr(t,e){var r=function(t,r){e(t,r)};r._rollbarHandler=!0;for(var n=process.listeners(t),o=n.length,i=0;i<o;++i)n[i]._rollbarHandler&&process.removeListener(t,n[i]);process.on(t,r)}function dr(t,e){Error.call(this),Error.captureStackTrace(this,this.constructor),this.message=t,this.nested=e,this.name=this.constructor.name}ur.init=function(t,e){return lr?lr.global(t).configure(t):lr=new ur(t,e)},ur.prototype.global=function(t){return delete(t=O(t)).maxItems,this.client.global(t),this},ur.global=function(t){if(lr)return lr.global(t);fr()},ur.prototype.configure=function(t,e){var r=this.options,n={};return e&&(n={payload:e}),this.options=O(r,t,n,mt),this.options._configuredOptions=O(r._configuredOptions,t,n),delete this.options.maxItems,mt.setVerbose(this.options.verbose),this.client.configure(t,e),this.setupUnhandledCapture(),this.options.locals&&(this.locals?this.locals.updateOptions(this.options.locals):this.locals=cr(this.options.locals,mt)),this},ur.configure=function(t,e){if(lr)return lr.configure(t,e);fr()},ur.prototype.lastError=function(){return this.client.lastError},ur.lastError=function(){if(lr)return lr.lastError();fr()},ur.prototype.log=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.log(t),{uuid:e}},ur.log=function(){if(lr)return lr.log.apply(lr,arguments);fr(pr(arguments))},ur.prototype.debug=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.debug(t),{uuid:e}},ur.debug=function(){if(lr)return lr.debug.apply(lr,arguments);fr(pr(arguments))},ur.prototype.info=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.info(t),{uuid:e}},ur.info=function(){if(lr)return lr.info.apply(lr,arguments);fr(pr(arguments))},ur.prototype.warn=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.warn(t),{uuid:e}},ur.warn=function(){if(lr)return lr.warn.apply(lr,arguments);fr(pr(arguments))},ur.prototype.warning=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.warning(t),{uuid:e}},ur.warning=function(){if(lr)return lr.warning.apply(lr,arguments);fr(pr(arguments))},ur.prototype.error=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.error(t),{uuid:e}},ur.error=function(){if(lr)return lr.error.apply(lr,arguments);fr(pr(arguments))},ur.prototype._uncaughtError=function(){var t=this._createItem(arguments);t._isUncaught=!0,t.level=this.options.uncaughtErrorLevel;var e=t.uuid;return this.client.log(t),{uuid:e}},ur.prototype.critical=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.critical(t),{uuid:e}},ur.critical=function(){if(lr)return lr.critical.apply(lr,arguments);fr(pr(arguments))},ur.prototype.buildJsonPayload=function(t){return this.client.buildJsonPayload(t)},ur.buildJsonPayload=function(){if(lr)return lr.buildJsonPayload.apply(lr,arguments);fr()},ur.prototype.sendJsonPayload=function(t){return this.client.sendJsonPayload(t)},ur.sendJsonPayload=function(){if(lr)return lr.sendJsonPayload.apply(lr,arguments);fr()},ur.prototype.wait=function(t){this.client.wait(t)},ur.wait=function(t){if(lr)return lr.wait(t);fr(pr(arguments))},ur.prototype.errorHandler=function(){return function(t,e,r,n){var o=function(o){return o&&mt.error("Error reporting to rollbar, ignoring: "+o),n(t,e,r)};return t?t instanceof Error?this.error(t,e,o):this.error("Error: "+t,e,o):n(t,e,r)}.bind(this)},ur.errorHandler=function(){if(lr)return lr.errorHandler();fr()},ur.prototype.lambdaHandler=function(t,e){return t.length<=2?this.asyncLambdaHandler(t,e):this.syncLambdaHandler(t,e)},ur.prototype.asyncLambdaHandler=function(t,e){var r=this,n=function(t,e){var n={originalEvent:t,originalRequestId:e.awsRequestId};r.error("Function timed out",n)},o=r.options.captureLambdaTimeouts;return function(i,a){return new Promise((function(s,u){if(r.lambdaContext=a,o){var c=(e||n).bind(null,i,a);r.lambdaTimeoutHandle=setTimeout(c,a.getRemainingTimeInMillis()-1e3)}t(i,a).then((function(t){r.wait((function(){clearTimeout(r.lambdaTimeoutHandle),s(t)}))})).catch((function(t){r.error(t),r.wait((function(){clearTimeout(r.lambdaTimeoutHandle),u(t)}))}))}))}},ur.prototype.syncLambdaHandler=function(t,e){var r=this,n=function(t,e,n){var o={originalEvent:t,originalRequestId:e.awsRequestId};r.error("Function timed out",o)},o=r.options.captureLambdaTimeouts;return function(i,a,s){if(r.lambdaContext=a,o){var u=(e||n).bind(null,i,a,s);r.lambdaTimeoutHandle=setTimeout(u,a.getRemainingTimeInMillis()-1e3)}try{t(i,a,(function(t,e){t&&r.error(t),r.wait((function(){clearTimeout(r.lambdaTimeoutHandle),s(t,e)}))}))}catch(t){r.error(t),r.wait((function(){throw clearTimeout(r.lambdaTimeoutHandle),t}))}}},ur.lambdaHandler=function(t){if(lr)return lr.lambdaHandler(t);fr()},ur.prototype.wrapCallback=function(t){return function(t,e){return function(){var r=arguments[0];return r&&t.error(r),e.apply(this,arguments)}}(this,t)},ur.wrapCallback=function(t){if(lr)return lr.wrapCallback(t);fr()},ur.prototype.captureEvent=function(){var t=function(t){for(var e,r,n,o,i=0,a=t.length;i<a;++i)switch(p(o=t[i])){case"string":!e&&x(w,o)?e=o:!n&&x(k,o)&&(n=o);break;case"object":r=o}return{type:e||"manual",metadata:r||{},level:n}}(arguments);return this.client.captureEvent(t.type,t.metadata,t.level)},ur.captureEvent=function(){if(lr)return lr.captureEvent.apply(lr,arguments);fr()},ur.prototype.reportMessage=function(t,e,r,n){return mt.log("reportMessage is deprecated"),h(this[e])?this[e](t,r,n):this.error(t,r,n)},ur.reportMessage=function(t,e,r,n){if(lr)return lr.reportMessage(t,e,r,n);fr(n)},ur.prototype.reportMessageWithPayloadData=function(t,e,r,n){return mt.log("reportMessageWithPayloadData is deprecated"),this.error(t,r,e,n)},ur.reportMessageWithPayloadData=function(t,e,r,n){if(lr)return lr.reportMessageWithPayloadData(t,e,r,n);fr(n)},ur.prototype.handleError=function(t,e,r){return mt.log("handleError is deprecated"),this.error(t,e,r)},ur.handleError=function(t,e,r){if(lr)return lr.handleError(t,e,r);fr(r)},ur.prototype.handleErrorWithPayloadData=function(t,e,r,n){return mt.log("handleErrorWithPayloadData is deprecated"),this.error(t,r,e,n)},ur.handleErrorWithPayloadData=function(t,e,r,n){if(lr)return lr.handleErrorWithPayloadData(t,e,r,n);fr(n)},ur.handleUncaughtExceptions=function(t,e){if(lr)return(e=e||{}).accessToken=t,lr.configure(e);fr()},ur.handleUnhandledRejections=function(t,e){if(lr)return(e=e||{}).accessToken=t,lr.configure(e);fr()},ur.handleUncaughtExceptionsAndRejections=function(t,e){if(lr)return(e=e||{}).accessToken=t,lr.configure(e);fr()},ur.prototype._createItem=function(t){var e=b(t,mt,this,["headers","protocol","url","method","body","route"],this.lambdaContext);return e.err&&e.notifier.locals&&(e.localsMap=e.notifier.locals.currentLocalsMap()),e},ur.prototype.setupUnhandledCapture=function(){(this.options.captureUncaught||this.options.handleUncaughtExceptions)&&this.handleUncaughtExceptions(),(this.options.captureUnhandledRejections||this.options.handleUnhandledRejections)&&this.handleUnhandledRejections()},ur.prototype.handleUncaughtExceptions=function(){var t=!!this.options.exitOnUncaughtException;delete this.options.exitOnUncaughtException,hr("uncaughtException",function(e){(this.options.captureUncaught||this.options.handleUncaughtExceptions)&&(this._uncaughtError(e,(function(t){t&&(mt.error("Encountered error while handling an uncaught exception."),mt.error(t))})),t&&setImmediate(function(){this.wait((function(){process.exit(1)}))}.bind(this)))}.bind(this))},ur.prototype.handleUnhandledRejections=function(){hr("unhandledRejection",function(t){(this.options.captureUnhandledRejections||this.options.handleUnhandledRejections)&&this._uncaughtError(t,(function(t){t&&(mt.error("Encountered error while handling an uncaught exception."),mt.error(t))}))}.bind(this))},r.inherits(dr,Error),ur.Error=dr,ur.defaultOptions={host:n.hostname(),environment:"production",framework:"node-js",showReportedMessageTraces:!1,notifier:{name:"node_rollbar",version:yt},scrubHeaders:wt,scrubFields:kt,addRequestData:null,reportLevel:vt,verbose:!1,enabled:!0,transmit:!0,sendConfig:!1,includeItemsInTelemetry:!1,captureEmail:!1,captureUsername:!1,captureIp:!0,captureLambdaTimeouts:!0,ignoreDuplicateErrors:!0,scrubRequestBody:!0,autoInstrument:!1};const mr=ur;module.exports=e.default})();